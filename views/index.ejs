<%- include('layout/header') %>

    <div class="container">
        <div class="row my-4">
            <div class="col-lg-12">
                <% if (message) { %>
                    <div class="alert alert-dismissible fade show alert-<%=message.type%>" role="alert">
                        <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
                        <strong>
                            <%= message.message %>
                        </strong>
                    </div>
                    <% } %>
                        <div class="table-resposive">
                            <% if (users!="" ) { %>
                                <table class="table table-striped">
                                    <thead>
                                        <tr class="table-dark text-center">
                                            <th> ID</th>
                                            <th>Image</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Phone</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% users.forEach((user,index)=> { %>
                                            <tr class="text-center">
                                                <td>
                                                    <%= index+1 %>
                                                </td>
                                                <td><img src="./uploads/<%= user.image %>" width="50"
                                                        class="img-thumbnail"></td>
                                                <td>
                                                    <%= user.name %>
                                                </td>
                                                <td>
                                                    <%= user.email %>
                                                </td>
                                                <td>
                                                    <%= user.phone %>
                                                </td>
                                                <td>
                                                    <a id="<%= user._id %>" class="text-success">
                                                        <i class="fas fa-edit fa-lg mx-1"></i>
                                                    </a>
                                                    <a href="delete/<%= user._id %>" class="text-danger">
                                                        <i class="fas fa-trash fa-lg mx-1"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <% }) %>

                                    </tbody>
                                </table>
                                <% } else { %>

                                    <h1 class="text-center text-secondary mt-5">
                                        No Users found in database
                                    </h1>
                                    <% } %>

                        </div>
            </div>
        </div>
    </div>
    </div>
    <form action="/add" method="post" class="hidden add-user-form" enctype="multipart/form-data">
        <h3 class="form-header">Add User</h3>
        <label for="name">Name</label>
        <div class="input-box">
            <input type="text" name="name" id="name" class="form-control form-control-1g" placeholder="Enter Name"
                required>
        </div>
        <label for="email">Email</label>
        <div class="input-box">
            <input type="email" name="email" id="email" class="form-control form-control-1g" placeholder="Enter Email"
                required>
        </div>
        <label for="phone">Phone</label>
        <div class="input-box">
            <input type="tel" name="phone" id="phone" class="form-control form-control-1g" placeholder="Enter Phone"
                required>
        </div>
        <label for="image" class="form-label">Select Image</label>
        <div class="input-box">
            <input type="file" name="image" id="image" class="form-control form-control-1g" required>
        </div>
        <div class="submit-btn">
            <button type="submit">Add User
            </button>
        </div>

        <div class="cancel-btn">
            <button type="button">Cancel
            </button>
        </div>
    </form>
    <%- include('layout/footer') %>